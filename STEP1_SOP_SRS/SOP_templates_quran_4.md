# دليل التشغيل القياسي (SOP) - نظام إدارة حلقات القرآن
## ملف: templates/quran_4.html

### 1. مقدمة
يُعد ملف `quran_4.html` نموذجاً أولياً ونظاماً متكاملاً لإدارة حلقات تحفيظ القرآن الكريم. يعمل هذا الملف كواجهة مستخدم (Dashboard) شاملة تتيح للمشرفين والمعلمين إدارة كافة الجوانب المتعلقة بالحلقات، الطلاب، المعلمين، الشؤون المالية، والتقارير الأكاديمية.

### 2. الهدف من الملف
توفير واجهة تفاعلية موحدة (Single Page Application Prototype) لإدارة العملية التعليمية والإدارية في مدارس أو مراكز تحفيظ القرآن، مع هيكلة بيانات واضحة لكل كيان في النظام.

---

### 3. تفاصيل الميزات والبيانات (Feature & Data Specifications)

فيما يلي تحليل تفصيلي لكل ميزة والبيانات المرتبطة بها (Data Fields) التي يتم جمعها ومعالجتها في النظام:

#### أولاً: إدارة الطلاب (Students Management)
تتيح هذه الوحدة تسجيل ومتابعة بيانات الطلاب الأكاديمية والشخصية.
*   **الوظائف**: عرض قائمة الطلاب (شبكة/Grid)، إضافة طالب جديد، شاشة بحث وتصفية (بالاسم، الحلقة، الحالة).
*   **بيانات الطالب (Data Fields)**:
    1.  **البيانات الشخصية**:
        *   الاسم الأول
        *   اسم الأب
        *   اسم الجد
        *   اسم العائلة
        *   تاريخ الميلاد
        *   الجنس (ذكر/أنثى)
    2.  **بيانات الاتصال**:
        *   رقم الهاتف
        *   البريد الإلكتروني
        *   العنوان
    3.  **البيانات الأكاديمية**:
        *   الحلقة (ربط مع جدول الحلقات)
        *   مستوى الحفظ الحالي (مبتدئ، متوسط، متقدم، مراجعة)
        *   حالة الطالب (نشط، موقوف، متأخر)
    4.  **ملاحظات**: حقل نصي حر لأي ملاحظات إضافية.

#### ثانياً: إدارة المعلمين (Teachers Management)
وحدة خاصة بإدارة شؤون المعلمين وتوزيعهم على الحلقات.
*   **الوظائف**: قائمة المعلمين، إضافة معلم، تصفية (بالتخصص، الحالة).
*   **بيانات المعلم (Data Fields)**:
    1.  **البيانات الشخصية**:
        *   الاسم الأول، الأب، العائلة
        *   رقم الهاتف، البريد الإلكتروني
    2.  **البيانات المهنية**:
        *   التخصص (تجويد، حفظ، مراجعة، تلاوة)
        *   تاريخ التعيين
        *   عدد الحلقات المسؤول عنها
        *   الحالة (نشط، غير نشط)
        *   المؤهلات (نص تفصيلي)

#### ثالثاً: إدارة الحلقات (Halaqat Management)
تنظيم المجموعات الدراسية (الحلقات) وجدولتها.
*   **الوظائف**: إنشاء حلقات، تعيين معلمين، تحديد الأوقات والأيام.
*   **بيانات الحلقة (Data Fields)**:
    *   **اسم الحلقة**
    *   **المعلم المسؤول** (اختيار من قائمة المعلمين)
    *   **المستوى** (مبتدئ، متوسط، متقدم، مراجعة)
    *   **القدرة الاستيعابية**: الحد الأقصى للطلاب.
    *   **مكان الحلقة**: (الموقع/القاعة)
    *   **الأوقات**:
        *   أيام الأسبوع (متعدد خيارات: السبت - الجمعة)
        *   وقت البدء
        *   وقت الانتهاء
        *   مدة الجلسة (بالدقائق)
    *   **الحالة**: (نشطة، غير نشطة)
    *   **الوصف**: وصف نصي للحلقة.

#### رابعاً: الحضور والغياب (Attendance System)
نظام مزدوج لتسجيل حضور الطلاب والمعلمين.

**أ. حضور الطلاب:**
*   **آلية التسجيل**: اختيار الحلقة والتاريخ، ثم تعبئة الحالة لكل طالب في القائمة.
*   **بيانات السجل**:
    *   التاريخ
    *   الحلقة
    *   الطالب
    *   **الحالة**: (حاضر، غائب، بعذر، متأخر)
    *   ملاحظات (سبب الغياب أو التأخر)

**ب. حضور المعلمين:**
*   **آلية التسجيل**: تسجيل يومي فردي لكل معلم.
*   **بيانات السجل**:
    *   التاريخ
    *   المعلم
    *   الحلقة (التي حضر فيها)
    *   **الحالة**: (حاضر، غائب، بعذر)
    *   **التوقيت**: وقت الحضور (Time In)، وقت الانصراف (Time Out)
    *   ملاحظات

#### خامساً: الاشتراكات والمالية (Subscriptions)
متابعة المدفوعات والرسوم الدراسية للطلاب.
*   **الوظائف**: إنشاء اشتراك، متابعة حالات الدفع، تنبيهات المتأخرين.
*   **بيانات الاشتراك (Data Fields)**:
    *   الطالب (اسم الطالب)
    *   **نوع الاشتراك**: (شهري، ربع سنوي، نصف سنوي، سنوي)
    *   **الفترة**: تاريخ البدء، تاريخ الانتهاء.
    *   **المالية**:
        *   المبلغ الكلي (Amount)
        *   المبلغ المدفوع (Paid)
        *   المتبقي (Calculated: Amount - Paid)
    *   **طريقة الدفع**: (نقدي، تحويل بنكي، بطاقة ائتمان، دفع إلكتروني)
    *   **الحالة**: (مدفوع، مستحق، متأخر، جزئي، منتهي)
    *   ملاحظات

#### سادساً: الواجبات والتقييم (Assignments & Grading)
نظام أكاديمي لمتابعة تقدم الطالب في الحفظ والمراجعة.
*   **الوظائف**: معالج إضافة واجبات (Wizard)، تقييم الواجبات، سجل الطالب الدراسي.
*   **أ. بيانات الواجب (Assignment Data)**:
    *   العنوان (مثل: حفظ سورة البقرة)
    *   الطالب والحلقة
    *   **نوع الواجب**: (حفظ، مراجعة، تجويد، تلاوة، اختبار)
    *   **التواريخ**: تاريخ الإعطاء، تاريخ التسليم.
    *   تفاصيل الواجب (نصي).
    *   ملاحظات للمعلم.

*   **ب. بيانات التقييم (Grade Data)**:
    *   **حالة التقديم**: (تاريخ التقديم، العمل المقدم).
    *   **التقييم اللفظي**: (ممتاز، جيد، متوسط، ضعيف).
    *   **الدرجة الرقمية**: (0 - 100).
    *   **تغذية راجعة (Feedback)**: ملاحظات المعلم على الأداء.

#### سابعاً: لوحة التحكم والتقارير (Dashboard & Reports)
*   **الإحصائيات المجمعة**:
    *   أعداد (الطلاب، المعلمين، الحلقات، الاشتراكات النشطة).
    *   اشتراكات منتهية أو متأخرة (تنبيهات).
*   **الرسوم البيانية**:
    *   تقدم الطلاب الأسبوعي.
    *   نسب الحضور والغياب.
    *   إحصائيات الاشتراكات (المالية).
    *   توزيع الدرجات.

---

### 4. طريقة الاستخدام (Workflow)

1.  **تهيئة النظام**: يبدأ النظام بتحميل بيانات تجريبية (Mock Data) في مصفوفات (Arrays) داخل الكود (`systemData`).
2.  **إدارة البيانات**: تتم الإضافة والتعديل عبر نماذج منبثقة (Modals) تستخدم `JavaScript` لتحديث المصفوفات وعرض التحديثات فوراً في الجداول دون تحديث الصفحة.
3.  **التكامل**:
    *   عند تسجيل واجب، يتم ربطه بالطالب والحلقة تلقائياً.
    *   عند تسجيل حضور، يتم حفظه في سجل الحضور المرتبط بالطالب والحلقة.
    *   بيانات "سجل الطالب" تجمع كل من: معلوماته الشخصية، نسبة حضوره، وسجل واجباته ودرجاته في شاشة واحدة.

---
*تحديث المستند: بيانات تفصيلية - 2026-01-15*
